"0","# Clean and wrangle df for Step 1"
"0",""
"0","# Keep necessary columns"
"0","step1_df <- vocabulary_scores_03_df %>%"
"0","  arrange(item_id_eng) %>%"
"0","  # Remove participants who were older than 18 months when they joined the study"
"0","  filter(!(starting_age > 18)) %>%"
"0","  # Remove duplicated rows (keep 1 row per baby per month) "
"0","  group_by(study_id, n_months) %>%"
"0","  summarize(age = first(age), "
"0","            starting_age = first(starting_age), "
"0","            eng_completed = first(eng_completed),"
"0","            fr_completed = first(fr_completed),"
"0","            eng_est_total_produced = first(eng_est_total_produced), "
"0","            fr_est_total_produced = first(fr_est_total_produced), "
"0","            words_produced = first(words_produced),"
"0","            concepts_produced = first(concepts_produced),"
"0","            num_datapts = first(num_datapts)) %>%"
"0","  # Create vocabulary_score column (includes scores for English, French, word, and concept vocabulary scores) and vocabulary_type_step1 column"
"0","  rename('English' = 'eng_est_total_produced',"
"0","         'French' = 'fr_est_total_produced',"
"0","         'word' = 'words_produced',"
"0","         'concept' = 'concepts_produced') %>%"
"0","  pivot_longer(-c(study_id:fr_completed, num_datapts), names_to = ""vocabulary_type_step1"", values_to = ""vocabulary_score"") %>%"
"0","  # Remove rows of monolinguals' non-heard language"
"0","  ungroup() %>%"
"0","  filter(!(vocabulary_type_step1 == 'English' & is.na(eng_completed))) %>%"
"0","  filter(!(vocabulary_type_step1 == 'French' & is.na(fr_completed))) %>% "
"0","  # Estimate number of data points missing by baby in each vocabulary type"
"0","  group_by(study_id, vocabulary_type_step1) %>% "
"0","  mutate(num_missing_datapts = sum(is.na(vocabulary_score)),"
"0","         # Set the maximum vocabulary size for single languages(i.e., the max CDI score in English and/or French)"
"0","         total = case_when(vocabulary_type_step1 == 'English' ~ 680,"
"0","                           vocabulary_type_step1 == 'French' ~ 664)) %>% "
"0","  ungroup() %>% "
"0","  group_by(study_id, n_months) %>% "
"0","  # Set the maximum vocabulary size for combined languages"
"0","  mutate(total = case_when(vocabulary_type_step1 == 'word' ~ sum(total, na.rm = TRUE),"
"0","                           vocabulary_type_step1 == 'concept' ~ sum(total, na.rm = TRUE),"
"0","                           TRUE ~ total)) %>% "
"0","  mutate(total = case_when(vocabulary_type_step1 == 'concept' & total == 1344 ~ 1344 - 611,"
"0","                           TRUE ~ total))"
"2","`summarise()` has grouped output by 'study_id'. You can override using the `.groups` argument."
"0","# Create df with babies who were older then 18 months when they started study "
"0","startage_over18 <- vocabulary_scores_03_df %>%"
"0","  filter(starting_age > 18) %>%"
"0","  distinct(study_id)"
"0",""
